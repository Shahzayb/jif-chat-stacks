(this["webpackJsonpjif-chat-stacks"]=this["webpackJsonpjif-chat-stacks"]||[]).push([[0],{1021:function(e,t){},1035:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(35),i=n.n(c),o=n(41),s=n(183),u=n(567),l=n(184),d=n(1063),j=n(1064),f=n(10),b=Object(u.a)(Object(l.a)({overrides:{MuiButton:{root:{textTransform:"capitalize"}}},props:{MuiButtonBase:{disableRipple:!0,disableTouchRipple:!0},MuiButton:{disableElevation:!0}}}));var p=function(e){var t=e.children;return Object(f.jsxs)(d.a,{theme:b,children:[Object(f.jsx)(j.a,{}),t]})},v=n(269),O=n(96),h=n(24),x=n(82),m=n(9),g=n.n(m),k=n(40),y=n(15),w=n(574),C=n(28),S=n(45),_=n(158),I="ST1FT1SWPBAJW3WS9JHMBFSQSJ7WXYM4R788NS2BY.jif-chat",A="send-message",N=n(113),B=n(381),J=n(1085),T=n(228),F=new N.AppConfig(["store_write","publish_data"],document.location.href),M=new N.UserSession({appConfig:F}),U=new J.a({userSession:M}),P=new B.b;P.coreApiUrl="https://stacks-node-api.regtest.stacks.co";var R=new B.a;R.coreApiUrl="https://stacks-node-api.stacks.co";var E,q,W=new T.Configuration({basePath:P.coreApiUrl}),z=new T.SmartContractsApi(W),D=new T.AccountsApi(W),L=new T.TransactionsApi(W),G=Object(w.a)({baseQuery:Object(x.d)({baseUrl:"/"}),endpoints:function(e){return{getJifBalance:e.query({queryFn:function(e){return Object(y.a)(g.a.mark((function t(){var n,r,a,c,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}return t.abrupt("return",{data:0});case 3:return n="ST1FT1SWPBAJW3WS9JHMBFSQSJ7WXYM4R788NS2BY.jif-token".split("."),r=Object(k.a)(n,2),a=r[0],c=r[1],t.next=6,z.callReadOnlyFunction({contractAddress:a,contractName:c,functionName:"get-balance",readOnlyFunctionArgs:{sender:e,arguments:[Object(C.c)(Object(_.principalCV)(e||""))]}});case 6:if(!(i=t.sent).okay||!i.result){t.next=9;break}return t.abrupt("return",{data:Object(S.c)(Object(C.i)(i.result)).replace("(ok u","").replace(")","")});case 9:return t.abrupt("return",{data:0});case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",{error:"Failed: getJifBalance"});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()}}),getJifTransactions:e.query({queryFn:function(){return Object(y.a)(g.a.mark((function e(){var t,n,r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.getAccountTransactions({limit:50,principal:I});case 3:return t=e.sent,n=t.results.filter((function(e){return"contract_call"===e.tx_type&&e.contract_call.function_name===A&&"success"===e.tx_status})).map((function(e){return e.tx_id})),e.next=7,Promise.all(n.map(function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.getTransactionById({txId:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return r=e.sent,a=r.map((function(e){var t,n,r,a,c,i,o,s,u,l,d,j,f=null===(t=e.contract_call.function_args)||void 0===t?void 0:t[0].repr.replace('u"',"").slice(0,-1),b=null===(n=e.contract_call.function_args)||void 0===n?void 0:n[1].repr.replace('(some u"',"").slice(0,-2),p=(null===(r=e.events)||void 0===r?void 0:r[0])&&"smart_contract_log"===(null===(a=e.events)||void 0===a||null===(c=a[0])||void 0===c?void 0:c.event_type)&&(null===(i=e.events)||void 0===i?void 0:i[0].contract_log)?Object(S.b)(Object(C.i)(null===(o=e.events)||void 0===o||null===(s=o[0])||void 0===s||null===(u=s.contract_log)||void 0===u||null===(l=u.value)||void 0===l?void 0:l.hex)):null;return{content:f,attachment:"no"===b?void 0:b,sender:e.sender_address,id:e.tx_id,index:null===p||void 0===p||null===(d=p.value)||void 0===d||null===(j=d.index)||void 0===j?void 0:j.value,timestamp:e.burn_block_time}})),e.abrupt("return",{data:a});case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",{error:"Failed: getJifTransactions"});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()}}),getPendingJifTransactions:e.query({queryFn:function(){return Object(y.a)(g.a.mark((function e(){var t,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.getMempoolTransactionList({limit:96});case 3:return t=e.sent,n=t.results.filter((function(e){return"contract_call"===e.tx_type&&e.contract_call.contract_id===I&&e.contract_call.function_name===A&&"pending"===e.tx_status})).map((function(e){return e.tx_id})),e.next=7,Promise.all(n.map(function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.getTransactionById({txId:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return r=e.sent,e.abrupt("return",{data:r.map((function(e){var t,n,r=null===(t=e.contract_call.function_args)||void 0===t?void 0:t[1].repr.replace('(some u"',"").slice(0,-1);return{sender:e.sender_address,content:null===(n=e.contract_call.function_args)||void 0===n?void 0:n[0].repr.replace('u"',"").slice(0,-1),id:e.tx_id,attachment:"non"===r?void 0:r,timestamp:e.receipt_time,isPending:!0}}))||[]});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{error:"Failed: getPendingJifTransactions"});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()}}),getGifFromGaia:e.query({queryFn:function(e){return Object(y.a)(g.a.mark((function t(){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",{data:null});case 2:return t.prev=2,t.next=5,fetch(e);case 5:return n=t.sent,t.next=8,n.json();case 8:return r=t.sent,t.abrupt("return",{data:r});case 12:return t.prev=12,t.t0=t.catch(2),t.abrupt("return",{error:"Failed to fetch the data"});case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))()}})}}}),V=G.useGetJifBalanceQuery,Q=G.useGetJifTransactionsQuery,Y=G.useGetGifFromGaiaQuery,H=G.useGetPendingJifTransactionsQuery,X=G,K=(null===M||void 0===M||null===(E=M.isUserSignedIn)||void 0===E?void 0:E.call(M))?null===M||void 0===M||null===(q=M.loadUserData)||void 0===q?void 0:q.call(M):null,Z=Object(h.d)({name:"auth",initialState:{user:K,accountNames:null,loading:!1},reducers:{setAuthUser:function(e,t){e.user=t.payload},setAuthLoading:function(e,t){e.loading=t.payload},setAccountNames:function(e,t){e.accountNames=t.payload}}}),$=Z.actions,ee=$.setAuthUser,te=$.setAuthLoading,ne=$.setAccountNames,re=function(e){return e.auth.user},ae=function(e){return e.auth.loading},ce=function(e){return e.auth.accountNames},ie=Z.reducer,oe=Object(O.b)(Object(v.a)({auth:ie},X.reducerPath,X.reducer)),se=Object(h.a)({reducer:oe,middleware:function(e){return e().concat(X.middleware)}});Object(x.e)(se.dispatch);var ue=se;var le=n(66),de=n(260),je=n(114),fe=n(562),be=n(1071),pe=n(361),ve=n(1073),Oe=n(1087),he=n(576),xe=n(1076),me=n(1077),ge=n(1078),ke=n(1079),ye=n(1080),we=n(1081),Ce=n(1082),Se=n(231),_e=n(1083),Ie=n(577),Ae=n.n(Ie),Ne=n(575),Be=n.n(Ne);function Je(){var e=Object(o.e)(re);return a.a.useMemo((function(){var t;return{user:e,profile:null===e||void 0===e?void 0:e.profile,addresses:null===e||void 0===e||null===(t=e.profile)||void 0===t?void 0:t.stxAddress,isSignedIn:!!e}}),[e])}function Te(){var e=Je().addresses;return null===e||void 0===e?void 0:e.testnet}function Fe(){var e=Te();return V(e,{pollingInterval:6e4}).data||0}var Me=function(){var e=Fe();return Object(f.jsxs)(Se.a,{children:[e||0," JIF"]})},Ue=function(e,t){return"".concat(e,"__").concat(t)};function Pe(e,t){var n=Ue(e,t),r=localStorage.getItem(n);return r?JSON.parse(r):null}function Re(e,t,n){var r=Ue(e,t);return localStorage.setItem(r,JSON.stringify(n))}function Ee(e){return qe.apply(this,arguments)}function qe(){return(qe=Object(y.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t.networkUrl,"/v1/addresses/stacks/").concat(t.address));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",(null===r||void 0===r?void 0:r.names)||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"".concat(e.substring(0,t+2),"\u2026").concat(e.substring(e.length-t))}function ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(!e)return"";if(e.startsWith("0x"))return We(e,t);if(e.includes(".")){var n,r,a=e.split("."),c=null===(n=a[0])||void 0===n?void 0:n.substr(0,t),i=null===(r=a[0])||void 0===r?void 0:r.substr(a[0].length-t,a[0].length);return"".concat(c,"\u2026").concat(i,".").concat(a[1])}var o=null===e||void 0===e?void 0:e.substr(0,t),s=null===e||void 0===e?void 0:e.substr(e.length-t,e.length);return"".concat(o,"\u2026").concat(s)}function De(){var e=Je().user,t=Object(o.d)(),n=Object(o.e)(ce),r=function(){var e=Je().addresses;return null===e||void 0===e?void 0:e.mainnet}(),c=Te(),i=null===n||void 0===n?void 0:n[0];return a.a.useEffect((function(){i||t(function(e){return function(){var t=Object(y.a)(g.a.mark((function t(n){var r,a,c,i,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(R){t.next=4;break}return t.abrupt("return");case 4:if(!(r=Pe(R.coreApiUrl,e))){t.next=12;break}if(a=Object(k.a)(r,2),c=a[0],i=a[1],Date.now()-i>18e5){t.next=12;break}return n(ne(c)),t.abrupt("return");case 12:return t.prev=12,t.next=15,Ee({networkUrl:R.coreApiUrl,address:e});case 15:(null===(o=t.sent)||void 0===o?void 0:o.length)&&Re(R.coreApiUrl,e,[o,Date.now()]),n(ne(o||[])),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(12),n(ne([]));case 23:case"end":return t.stop()}}),t,null,[[12,20]])})));return function(e){return t.apply(this,arguments)}}()}(r))}),[r,t,i]),i||(null===e||void 0===e?void 0:e.username)||ze(c)}var Le=function(e){var t=De();return Object(f.jsx)(Se.a,Object(je.a)(Object(je.a)({},e),{},{children:t}))},Ge=n(583),Ve=n(1072),Qe=["endIcon","onClick","children","disabled"];var Ye=function(e){var t=e.endIcon,n=e.onClick,r=e.children,a=e.disabled,c=Object(Ge.a)(e,Qe),i=Object(N.useConnect)().doOpenAuth,s=Object(o.d)(),u=Object(o.e)(ae);return Object(f.jsx)(be.a,Object(je.a)(Object(je.a)({},c),{},{onClick:function(){s(te(!0)),i(),null===n||void 0===n||n()},endIcon:u?Object(f.jsx)(Ve.a,{size:"1rem"}):t,disabled:!(!u&&!a),children:null!==r&&void 0!==r?r:"Connect wallet"}))};var He=function(){var e=Te(),t=Object(o.d)(),n=Fe(),r=Boolean(parseInt(null!==n&&void 0!==n?n:0,10)),c=a.a.useState(!1),i=Object(k.a)(c,2),s=i[0],u=i[1],l=Object(N.useConnect)().doContractCall,d=I.split("."),j=Object(k.a)(d,2),b=j[0],p=j[1],v=P,O=function(){u(!1),t(X.endpoints.getJifBalance.initiate(e,{forceRefetch:!0}))},h=function(){u(!1)};return Object(f.jsx)(be.a,{onClick:function(){u(!0),l({contractAddress:b,contractName:p,functionName:"request-jif",functionArgs:[Object(_.principalCV)(e)],onFinish:O,onCancel:h,network:v,stxAddress:e})},endIcon:s?Object(f.jsx)(Ve.a,{size:"1rem"}):void 0,disabled:s||r,children:"Claim Jif Token"})},Xe=Object(fe.a)((function(e){return{grow:{flexGrow:1},navItems:{display:"flex",alignItems:"center","& > * + *":{marginLeft:e.spacing(2)}}}}));function Ke(e){var t=Object(le.f)();return Object(f.jsx)(be.a,Object(je.a)(Object(je.a)({},e),{},{onClick:function(){t.push("/post")},endIcon:Object(f.jsx)(Be.a,{}),children:"Post Jif"}))}function Ze(){return Object(f.jsxs)(pe.a,{display:"flex",flexDirection:"column",children:[Object(f.jsx)(Le,{}),Object(f.jsx)(Me,{})]})}function $e(){var e=a.a.useState(null),t=Object(k.a)(e,2),n=t[0],r=t[1],c=function(){var e=Object(o.d)();return a.a.useCallback((function(){var t;null===M||void 0===M||null===(t=M.signUserOut)||void 0===t||t.call(M),e(ee(null))}),[e])}(),i=Boolean(n),s=function(){r(null)};return Object(f.jsxs)("div",{children:[Object(f.jsx)(ve.a,{size:"small","aria-label":"account of current user","aria-controls":"user-menu","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)},color:"inherit",children:Object(f.jsx)(Oe.a,{})}),Object(f.jsxs)(he.a,{id:"user-menu",anchorEl:n,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},keepMounted:!0,open:i,onClose:s,children:[Object(f.jsx)(xe.a,{disabled:!0,divider:!0,style:{opacity:1},children:Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(f.jsx)(pe.a,{mr:2,children:Object(f.jsx)(Oe.a,{})}),Object(f.jsx)(Ze,{})]})}),Object(f.jsxs)(xe.a,{onClick:function(){c(),s()},children:[Object(f.jsx)(me.a,{children:Object(f.jsx)(Ae.a,{})}),Object(f.jsx)(ge.a,{primary:"Logout"})]})]})]})}function et(){var e=Xe();return Object(f.jsxs)("div",{className:e.navItems,display:"flex",alignItems:"center",children:[Object(f.jsx)(He,{}),Object(f.jsx)(ke.a,{orientation:"vertical",flexItem:!0}),Object(f.jsx)(Ke,{}),Object(f.jsx)(ke.a,{orientation:"vertical",flexItem:!0}),Object(f.jsx)(Ze,{}),Object(f.jsx)(ke.a,{orientation:"vertical",flexItem:!0}),Object(f.jsx)($e,{})]})}var tt=function(){var e=Je().isSignedIn,t=Xe();return Object(f.jsx)(ye.a,{position:"fixed",variant:"outlined",color:"default",children:Object(f.jsx)(we.a,{children:Object(f.jsxs)(Ce.a,{children:[Object(f.jsx)(Se.a,{className:t.grow,variant:"h5",children:Object(f.jsx)(_e.a,{color:"inherit",component:s.b,to:"/",children:"jif-chat-stacks"})}),!e&&Object(f.jsx)(Ye,{}),e&&Object(f.jsx)(et,{})]})})})},nt=Object(de.a)("div")({marginBottom:"5rem"});var rt=function(e){var t=e.children;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(nt,{children:Object(f.jsx)(tt,{})}),t]})},at=n(168);var ct=n(586),it=(0,n(85).styled)("video")({position:"absolute",top:0,left:0,right:0,bottom:0,objectFit:"cover",width:"100%",height:"100%"}),ot=function(e){var t=e.gif,n=a.a.useRef(null);return a.a.useEffect((function(){var e=n.current,r=window.URL.createObjectURL(t);return e.src=r,function(){window.URL.revokeObjectURL(r)}}),[t,n]),Object(f.jsx)(it,{className:"video",ref:n,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})},st=Object(de.a)("div")({position:"relative",width:"100%",height:"250px",maxWidth:"450px"}),ut=n(277),lt=Object(fe.a)((function(e){return{paper:{padding:e.spacing(3),paddingTop:5,marginBottom:e.spacing(2)}}}));var dt=function(e){var t=e.content,n=e.sender,r=e.attachment,c=lt(),i=Y(r).data,o=a.a.useMemo((function(){return i?Object(ut.a)(i.base64Video,{type:i.type}):null}),[i]);return Object(f.jsxs)(ct.a,{className:c.paper,children:[Object(f.jsx)(pe.a,{my:2,children:Object(f.jsx)(Se.a,{children:ze(n)})}),Boolean(o)&&Object(f.jsx)(st,{children:Object(f.jsx)(ot,{gif:o})}),Object(f.jsx)(Se.a,{children:t})]})};var jt=function(){var e=function(){var e=Q(void 0,{pollingInterval:500}).data,t=H(void 0,{pollingInterval:1e3}).data;return a.a.useMemo((function(){return[].concat(Object(at.a)(t||[]),Object(at.a)(e||[]))}),[e,t])}();return Object(f.jsx)(we.a,{maxWidth:"xs",children:null===e||void 0===e?void 0:e.map((function(e){return Object(f.jsx)(dt,Object(je.a)({},e),e.id)}))})};var ft=function(){return Object(f.jsx)(rt,{children:Object(f.jsx)(we.a,{children:Object(f.jsx)(jt,{})})})},bt=n(580),pt=n(581),vt=n(227);var Ot=function(e){var t=e.constraint,n=e.onMediaStreamError,r=e.onMediaStream,c=a.a.useRef(null);return a.a.useEffect((function(){var e=c.current;return"mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices?(window.navigator.mediaDevices.getUserMedia(t).then((function(t){e.srcObject=t,r(t)})).catch(n),e.onloadedmetadata=function(){e.play()}):n(new Error("camera not supported")),function(){var t;(t=e)&&t.srcObject&&(t.srcObject.getTracks().forEach((function(e){e.stop()})),t.srcObject=null)}}),[c,t,n,r]),Object(f.jsx)(it,{className:"video",ref:c,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})},ht=Object(fe.a)((function(e){return{button:{color:e.palette.common.black},recordingButton:{color:e.palette.error.main},controlsContainer:{paddingBlock:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"space-between"}}})),xt=Object(de.a)("div")((function(e){var t=e.theme;return{display:"flex",flexDirection:"column",alignItems:"center",color:t.palette.error.main,"& > * + *":{marginTop:t.spacing(1)}}})),mt=Object(de.a)("div")((function(e){return{position:"relative",backgroundColor:e.theme.palette.grey[100],borderRadius:"5px"}})),gt=Object(de.a)("div")({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"});var kt=function(e){var t=e.gifVideo,n=e.setGifVideo,r=e.disabled,c=void 0!==r&&r,i=e.required,o=ht(),s=a.a.useState(!1),u=Object(k.a)(s,2),l=u[0],d=u[1],j=a.a.useState(!0),b=Object(k.a)(j,2),p=b[0],v=b[1],O=a.a.useState(!0),h=Object(k.a)(O,2),x=h[0],m=h[1],g=a.a.useState(!1),y=Object(k.a)(g,2),w=y[0],C=y[1],S=a.a.useState(null),_=Object(k.a)(S,2),I=_[0],A=_[1],N=!c&&i&&!t,B=a.a.useMemo((function(){return{audio:!1,video:{facingMode:x?"user":"environment",width:{min:640,ideal:1920,max:1920},height:{min:400,ideal:1080}}}}),[x]),J=a.a.useCallback((function(e){var t=new MediaRecorder(e);A(t),d(!1),v(!0)}),[]),T=a.a.useCallback((function(e){"NotAllowedError"===e.name?d(!0):v(!1)}),[]),F=a.a.useCallback((function(){C(!0);var e=[];I.start(),setTimeout((function(){I.stop()}),1800),I.ondataavailable=function(t){e.push(t.data)},I.onstop=function(){var t=new Blob(e,{type:"video/mp4;"});n(t),C(!1),A(null)}}),[I,n]),M=a.a.useCallback((function(){m(!x)}),[x]),U=a.a.useCallback((function(){n(null)}),[n]);return Object(f.jsxs)("div",{children:[Object(f.jsxs)(mt,{children:[!t&&Object(f.jsx)(st,{children:Object(f.jsx)(Ot,{constraint:B,onMediaStream:J,onMediaStreamError:T})}),t&&Object(f.jsx)(st,{children:Object(f.jsx)(ot,{gif:t})}),l&&Object(f.jsx)(gt,{children:Object(f.jsxs)(xt,{children:[Object(f.jsx)(bt.a,{fontSize:"1.5rem"}),Object(f.jsx)(Se.a,{children:"camera is off"})]})}),!p&&Object(f.jsx)(gt,{children:Object(f.jsxs)(Se.a,{color:"error",children:[x?"front":"back"," camera is not supported"]})})]}),Object(f.jsxs)("div",{className:o.controlsContainer,children:[Object(f.jsx)(ve.a,{className:o.button,size:"small",disabled:!t||w||!p||l||c,onClick:U,children:Object(f.jsx)(pt.a,{})}),Object(f.jsx)(ve.a,{className:o.recordingButton,size:"small",disabled:!I||w||t||!p||l||c,onClick:F,children:Object(f.jsx)(vt.b,{fontSize:"3rem"})}),Object(f.jsx)(ve.a,{className:o.button,size:"small",onClick:M,disabled:c,children:Object(f.jsx)(vt.a,{})})]}),N&&Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{children:"*"})," ",Object(f.jsx)("span",{children:"gif required"})]})]})},yt=n(1084);var wt=function(e){var t=e.value,n=e.onChange;return Object(f.jsx)(yt.a,{multiline:!0,inputProps:{maxLength:140},rowsMax:5,value:t,onChange:n,variant:"outlined",fullWidth:!0,placeholder:"Say hi"})},Ct=n(1086),St=n(378),_t=n(377),It=n(6),At=n(20),Nt=n(279),Bt=n(220),Jt=Object(fe.a)((function(e){return{paper:{padding:e.spacing(3)},button:{display:"flex",marginTop:"1rem",marginLeft:"auto"}}}));var Tt=function(){var e=Jt(),t=Object(o.d)(),n=Object(le.f)(),r=a.a.useState(!1),c=Object(k.a)(r,2),i=c[0],s=c[1],u=a.a.useState(null),l=Object(k.a)(u,2),d=l[0],j=l[1],b=a.a.useState(""),p=Object(k.a)(b,2),v=p[0],O=p[1],h=Je().isSignedIn,x=Te(),m=I.split("."),w=Object(k.a)(m,2),C=w[0],S=w[1],_=Object(N.useConnect)().doContractCall,A=function(){var e=Object(y.a)(g.a.mark((function e(){var r,a,c,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s(!0),r=Object(Ct.a)(),a="",!d){e.next=12;break}return e.next=7,Object(ut.b)(d);case 7:return c=e.sent,i=d.type,e.next=11,U.putFile(r,JSON.stringify({base64Video:c,type:i}),{encrypt:!1});case 11:a=e.sent;case 12:_({contractAddress:C,contractName:S,functionName:"send-message",functionArgs:[Object(St.b)(v),""!==a?Object(_t.b)(Object(St.b)(a)):Object(_t.a)()],onFinish:function(){t(X.endpoints.getJifBalance.initiate(x,{forceRefetch:!0})),t(X.endpoints.getJifTransactions.initiate(void 0,{forceRefetch:!0})),t(X.endpoints.getPendingJifTransactions.initiate(void 0,{forceRefetch:!0})),s(!1),n.push("/")},postConditions:[Object(Nt.a)(x,It.j.Equal,new Bt.BN(1),Object(At.g)(C,"jif-token","jif-token"))],onCancel:function(){s(!1)},network:P,stxAddress:x}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),s(!1);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)(rt,{children:Object(f.jsx)(we.a,{maxWidth:"xs",children:Object(f.jsxs)(ct.a,{className:e.paper,children:[Object(f.jsx)(kt,{required:!1,gifVideo:d,setGifVideo:j}),Object(f.jsx)(wt,{value:v,onChange:function(e){O(e.target.value)}}),Object(f.jsx)(be.a,{className:e.button,color:"primary",variant:"contained",disabled:!(null===v||void 0===v?void 0:v.trim())||i||!h,endIcon:i?Object(f.jsx)(Ve.a,{size:"1rem"}):Object(f.jsx)(vt.c,{}),onClick:A,children:"Post"})]})})})};var Ft=function(){var e=function(){var e=Object(o.d)();return{manifestPath:"/static/manifest.json",userSession:M,onFinish:function(t){var n,r=t.userSession,a=null===r||void 0===r||null===(n=r.loadUserData)||void 0===n?void 0:n.call(r);e(ee(a)),e(te(!1))},onCancel:function(){e(te(!1))},appDetails:{name:"Jif Chat",icon:"/logo192.png"}}}();return Object(f.jsx)(N.Connect,{authOptions:e,children:Object(f.jsxs)(le.c,{children:[Object(f.jsx)(le.a,{exact:!0,path:"/",children:Object(f.jsx)(ft,{})}),Object(f.jsx)(le.a,{exact:!0,path:"/post",children:Object(f.jsx)(Tt,{})})]})})};i.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(o.a,{store:ue,children:Object(f.jsx)(s.a,{basename:"/jif-chat-stacks",children:Object(f.jsx)(p,{children:Object(f.jsx)(Ft,{})})})})}),document.getElementById("root"))},542:function(e,t){},776:function(e,t){},777:function(e,t){},801:function(e,t){},809:function(e,t){},811:function(e,t){},817:function(e,t){},819:function(e,t){},830:function(e,t){},903:function(e,t){},905:function(e,t){},910:function(e,t){},912:function(e,t){},918:function(e,t){},920:function(e,t){},932:function(e,t){},935:function(e,t){},946:function(e,t){},950:function(e,t,n){var r={"./connect-modal.entry.js":[1054,4]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=950,e.exports=a}},[[1035,2,3]]]);
//# sourceMappingURL=main.99626a72.chunk.js.map