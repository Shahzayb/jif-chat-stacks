{"version":3,"sources":["components/theme/ThemeProvider.jsx","common/constants.js","common/stacks.js","store/api/index.js","store/auth.js","store/index.js","common/hooks/useUser.js","common/hooks/useCurrentAddress.js","components/shared/AccountBalance.jsx","store/thunks/getAccountNamesByAddress.js","common/utils/stacks-utils.js","common/hooks/useAccountName.js","components/shared/AccountName.jsx","components/shared/ConnectWalletButton.jsx","components/shared/Navbar.jsx","common/hooks/useSignOut.js","components/shared/Layout.jsx","components/Post/Video.jsx","components/Post/GifVideoPlayer.jsx","components/Post/VideoContainer.jsx","components/Home/FeedItem.jsx","components/Home/Feed.jsx","common/hooks/useFeed.js","pages/Home.jsx","components/Post/LiveCamera.jsx","components/Post/GifRecorder.jsx","components/Post/TextField.jsx","pages/Post.jsx","App.jsx","common/hooks/useConnectAuthOptions.js","index.jsx","../node_modules/@stacks/connect-ui/dist/esm lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object"],"names":["theme","responsiveFontSizes","createMuiTheme","overrides","MuiButton","root","textTransform","props","MuiButtonBase","disableRipple","disableTouchRipple","disableElevation","ThemeProvider","children","CssBaseline","JIF_CHAT_CONTRACT","MESSAGE_FUNCTION","appConfig","AppConfig","document","location","href","userSession","UserSession","storage","Storage","testNetwork","StacksTestnet","coreApiUrl","mainNetwork","StacksMainnet","testNetworkConfig","Configuration","basePath","smartContractApiClient","SmartContractsApi","accountsApiClient","AccountsApi","transactionsApiClient","TransactionsApi","api","createApi","baseQuery","fetchBaseQuery","baseUrl","endpoints","build","getJifBalance","query","queryFn","address","data","split","contractAddress","contractName","callReadOnlyFunction","functionName","readOnlyFunctionArgs","sender","arguments","cvToHex","principalCV","okay","result","cvToString","hexToCV","replace","error","getJifTransactions","getAccountTransactions","limit","principal","txs","txids","results","filter","tx","tx_type","contract_call","function_name","tx_status","map","tx_id","Promise","all","txId","a","getTransactionById","final","feed","content","function_args","repr","slice","attachment","contractLog","events","event_type","contract_log","cvToJSON","value","hex","undefined","sender_address","id","index","timestamp","burn_block_time","getPendingJifTransactions","getMempoolTransactionList","heyTxs","contract_id","receipt_time","isPending","getGifFromGaia","url","fetch","fetchRes","json","jsonRes","useGetJifBalanceQuery","useGetJifTransactionsQuery","useGetGifFromGaiaQuery","useGetPendingJifTransactionsQuery","user","isUserSignedIn","loadUserData","authSlice","createSlice","name","initialState","accountNames","loading","reducers","setAuthUser","state","action","payload","setAuthLoading","setAccountNames","actions","userSelector","auth","authLoadingSelector","accountNamesSelector","reducer","combineReducers","reducerPath","store","configureStore","middleware","getDefaultMiddleware","concat","setupListeners","dispatch","useUser","useSelector","React","useMemo","profile","addresses","stxAddress","isSignedIn","useCurrentAddress","testnet","AccountBalance","pollingInterval","Typography","makeKey","networkUrl","getLocalNames","key","localStorage","getItem","JSON","parse","setLocalNames","setItem","stringify","fetchNamesByAddress","param","res","names","truncateHex","offset","substring","length","truncateMiddle","input","startsWith","includes","parts","start","substr","end","useAccountName","useDispatch","mainnet","useCurrentMainnetAddress","testnetAddress","useEffect","local","Date","now","getAccountNamesByAddress","username","AccountName","ConnectWalletButton","endIcon","onClick","disabled","doOpenAuth","useConnect","isLoading","Button","CircularProgress","size","useStyles","makeStyles","grow","flexGrow","navItems","display","alignItems","marginLeft","spacing","MakeAPostButton","history","useHistory","push","NameAndBalance","Box","flexDirection","AccountMenu","useState","anchorEl","setAnchorEl","signOut","useCallback","signUserOut","useSignOut","isMenuOpen","Boolean","handleMenuClose","IconButton","aria-label","aria-controls","aria-haspopup","event","currentTarget","color","Avatar","Menu","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","keepMounted","open","onClose","MenuItem","divider","style","opacity","mr","ListItemIcon","ListItemText","primary","SignedInNavItems","classes","className","Divider","orientation","flexItem","Navbar","AppBar","position","variant","Container","Toolbar","component","RouterLink","to","MB","styled","marginBottom","Layout","Video","require","top","left","right","bottom","objectFit","width","height","GifVideoPlayer","gif","videoRef","useRef","video","current","videoURL","window","URL","createObjectURL","src","revokeObjectURL","ref","autoPlay","loop","muted","playsInline","VideoContainer","maxWidth","paper","padding","paddingTop","FeedItem","base64StringToBlob","base64Video","type","Paper","my","Feed","completed","pending","combined","console","log","useFeed","item","Home","LiveCamera","constraint","onMediaStreamError","onMediaStream","liveVideoRef","navigator","mediaDevices","getUserMedia","then","stream","srcObject","catch","onloadedmetadata","play","Error","videoElem","getTracks","forEach","track","stop","button","palette","common","black","recordingButton","main","controlsContainer","paddingBlock","justifyContent","ErrorContainer","marginTop","CameraContainer","backgroundColor","grey","borderRadius","AbsoluteCenter","transform","GifRecorder","gifVideo","setGifVideo","required","isOff","setOff","isSupported","setSupported","isFront","setFront","recording","setRecording","recorder","setRecorder","isError","audio","facingMode","min","ideal","max","streamMediaHandler","mediaRecorder","MediaRecorder","streamMediaErrorHandler","e","recordHandler","chunks","setTimeout","ondataavailable","ev","onstop","blob","Blob","toggleCamera","clearGifVideo","fontSize","TextField","onChange","multiline","inputProps","maxLength","rowsMax","fullWidth","placeholder","Post","isSubmitting","setIsSubmitting","setGif","setContent","doContractCall","handleSubmit","uuidv4","fileUrl","blobToBase64String","putFile","encrypt","functionArgs","stringUtf8CV","someCV","noneCV","onFinish","initiate","forceRefetch","postConditions","createFungiblePostCondition","FungibleConditionCode","Equal","BN","createAssetInfo","onCancel","network","target","trim","App","authOptions","manifestPath","$userSession","userData","appDetails","icon","useConnectAuthOptions","exact","path","ReactDOM","render","StrictMode","basename","process","getElementById","webpackAsyncContext","req","__webpack_require__","o","resolve","code","ids","keys","Object","module","exports"],"mappings":"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","file":"static/js/main.b8076cb4.chunk.js","sourcesContent":["import React from 'react';\nimport {\n  CssBaseline,\n  ThemeProvider as MuiThemeProvider,\n  responsiveFontSizes,\n  createMuiTheme,\n} from '@material-ui/core';\n\nconst theme = responsiveFontSizes(\n  createMuiTheme({\n    overrides: {\n      MuiButton: {\n        root: {\n          textTransform: 'capitalize',\n        },\n      },\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n        disableTouchRipple: true,\n      },\n      MuiButton: {\n        disableElevation: true,\n      },\n    },\n  })\n);\n\nfunction ThemeProvider({children}) {\n  return (\n    <MuiThemeProvider theme={theme}>\n      <CssBaseline />\n      {children}\n    </MuiThemeProvider>\n  );\n}\n\nexport default ThemeProvider;\n","export const JIF_TOKEN_CONTRACT = 'ST1FT1SWPBAJW3WS9JHMBFSQSJ7WXYM4R788NS2BY.jif-token';\nexport const JIF_CHAT_CONTRACT = 'ST1FT1SWPBAJW3WS9JHMBFSQSJ7WXYM4R788NS2BY.jif-chat';\nexport const MESSAGE_FUNCTION = 'send-message';\n","import {AppConfig, UserSession} from '@stacks/connect-react';\nimport {StacksMainnet, StacksTestnet} from '@stacks/network';\nimport {Storage} from '@stacks/storage';\nimport {\n  AccountsApi,\n  Configuration,\n  SmartContractsApi,\n  TransactionsApi,\n} from '@stacks/blockchain-api-client';\n\nexport const appConfig = new AppConfig(['store_write', 'publish_data'], document.location.href);\nexport const userSession = new UserSession({appConfig});\nexport const storage = new Storage({userSession});\n\nconst testNetwork = new StacksTestnet();\ntestNetwork.coreApiUrl = 'https://stacks-node-api.regtest.stacks.co';\n\nconst mainNetwork = new StacksMainnet();\nmainNetwork.coreApiUrl = 'https://stacks-node-api.stacks.co';\n\nexport const testNetworkConfig = new Configuration({basePath: testNetwork.coreApiUrl});\n\nexport const smartContractApiClient = new SmartContractsApi(testNetworkConfig);\n\nexport const accountsApiClient = new AccountsApi(testNetworkConfig);\n\nexport const transactionsApiClient = new TransactionsApi(testNetworkConfig);\n\nexport {testNetwork, mainNetwork};\n","import {createApi, fetchBaseQuery} from '@reduxjs/toolkit/query/react';\nimport {cvToHex, cvToJSON, cvToString, hexToCV} from '@stacks/transactions';\nimport {principalCV} from '@stacks/transactions/dist/clarity/types/principalCV';\nimport {JIF_CHAT_CONTRACT, JIF_TOKEN_CONTRACT, MESSAGE_FUNCTION} from 'common/constants';\nimport {accountsApiClient, smartContractApiClient, transactionsApiClient} from 'common/stacks';\n\nconst api = createApi({\n  baseQuery: fetchBaseQuery({baseUrl: '/'}),\n\n  endpoints: build => ({\n    getJifBalance: build.query({\n      async queryFn(address) {\n        try {\n          if (!address) return {data: 0};\n\n          const [contractAddress, contractName] = JIF_TOKEN_CONTRACT.split('.');\n          const data = await smartContractApiClient.callReadOnlyFunction({\n            contractAddress,\n            contractName,\n            functionName: 'get-balance',\n            readOnlyFunctionArgs: {\n              sender: address,\n              arguments: [cvToHex(principalCV(address || ''))],\n            },\n          });\n\n          if (data.okay && data.result) {\n            return {data: cvToString(hexToCV(data.result)).replace('(ok u', '').replace(')', '')};\n          }\n          return {data: 0};\n        } catch {\n          return {error: 'Failed: getJifBalance'};\n        }\n      },\n    }),\n    getJifTransactions: build.query({\n      async queryFn() {\n        try {\n          const txs = await accountsApiClient.getAccountTransactions({\n            limit: 50,\n            principal: JIF_CHAT_CONTRACT,\n          });\n          const txids = txs.results\n            .filter(\n              tx =>\n                tx.tx_type === 'contract_call' &&\n                tx.contract_call.function_name === MESSAGE_FUNCTION &&\n                tx.tx_status === 'success'\n            )\n            .map(tx => tx.tx_id);\n\n          const final = await Promise.all(\n            txids.map(async txId => transactionsApiClient.getTransactionById({txId}))\n          );\n\n          const feed = final.map(tx => {\n            const content = tx.contract_call.function_args?.[0].repr.replace(`u\"`, '').slice(0, -1);\n            const attachment = tx.contract_call.function_args?.[1].repr\n              .replace(`(some u\"`, '')\n              .slice(0, -2);\n\n            // eslint-disable-next-line no-nested-ternary\n            const contractLog = tx.events?.[0]\n              ? tx.events?.[0]?.event_type === 'smart_contract_log' && tx.events?.[0].contract_log\n                ? cvToJSON(hexToCV(tx.events?.[0]?.contract_log?.value?.hex))\n                : null\n              : null;\n\n            return {\n              content,\n              attachment: attachment === 'no' ? undefined : attachment,\n              sender: tx.sender_address,\n              id: tx.tx_id,\n              index: contractLog?.value?.index?.value,\n              timestamp: tx.burn_block_time,\n            };\n          });\n          return {data: feed};\n        } catch {\n          return {error: 'Failed: getJifTransactions'};\n        }\n      },\n    }),\n    getPendingJifTransactions: build.query({\n      async queryFn() {\n        try {\n          const txs = await transactionsApiClient.getMempoolTransactionList({limit: 96});\n          const heyTxs = txs.results\n            .filter(\n              tx =>\n                tx.tx_type === 'contract_call' &&\n                tx.contract_call.contract_id === JIF_CHAT_CONTRACT &&\n                tx.contract_call.function_name === MESSAGE_FUNCTION &&\n                tx.tx_status === 'pending'\n            )\n            .map(tx => tx.tx_id);\n\n          const final = await Promise.all(\n            heyTxs.map(async txId => transactionsApiClient.getTransactionById({txId}))\n          );\n\n          return {\n            data:\n              final.map(tx => {\n                const attachment = tx.contract_call.function_args?.[1].repr\n                  .replace(`(some u\"`, '')\n                  .slice(0, -1);\n\n                return {\n                  sender: tx.sender_address,\n                  content: tx.contract_call.function_args?.[0].repr.replace(`u\"`, '').slice(0, -1),\n                  id: tx.tx_id,\n                  attachment: attachment === 'non' ? undefined : attachment,\n                  timestamp: tx.receipt_time,\n                  isPending: true,\n                };\n              }) || [],\n          };\n        } catch {\n          return {error: 'Failed: getPendingJifTransactions'};\n        }\n      },\n    }),\n    getGifFromGaia: build.query({\n      async queryFn(url) {\n        if (!url) {\n          return {data: null};\n        }\n        try {\n          const fetchRes = await fetch(url);\n          const jsonRes = await fetchRes.json();\n          return {data: jsonRes};\n        } catch {\n          return {error: 'Failed to fetch the data'};\n        }\n      },\n    }),\n  }),\n});\n\nexport const {\n  useGetJifBalanceQuery,\n  useGetJifTransactionsQuery,\n  useGetGifFromGaiaQuery,\n  useGetPendingJifTransactionsQuery,\n} = api;\n\nexport default api;\n","import {createSlice} from '@reduxjs/toolkit';\nimport {userSession} from 'common/stacks';\n\nconst user = userSession?.isUserSignedIn?.() ? userSession?.loadUserData?.() : null;\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState: {\n    user,\n    accountNames: null,\n    loading: false,\n  },\n  reducers: {\n    setAuthUser(state, action) {\n      state.user = action.payload;\n    },\n    setAuthLoading(state, action) {\n      state.loading = action.payload;\n    },\n    setAccountNames(state, action) {\n      state.accountNames = action.payload;\n    },\n  },\n});\n\nexport const {setAuthUser, setAuthLoading, setAccountNames} = authSlice.actions;\n\nexport const userSelector = state => state.auth.user;\nexport const authLoadingSelector = state => state.auth.loading;\nexport const accountNamesSelector = state => state.auth.accountNames;\n\nexport default authSlice.reducer;\n","import {combineReducers, configureStore} from '@reduxjs/toolkit';\nimport {setupListeners} from '@reduxjs/toolkit/query';\nimport api from './api';\n\nimport auth from './auth';\n\nexport const reducer = combineReducers({\n  auth,\n  [api.reducerPath]: api.reducer,\n});\n\nconst store = configureStore({\n  reducer,\n  middleware: getDefaultMiddleware => getDefaultMiddleware().concat(api.middleware),\n});\n\nsetupListeners(store.dispatch);\n\nexport default store;\n","import React from 'react';\nimport {useSelector} from 'react-redux';\nimport {userSelector} from 'store/auth';\n\nfunction useUser() {\n  const user = useSelector(userSelector);\n\n  const data = React.useMemo(\n    () => ({\n      user,\n      profile: user?.profile,\n      addresses: user?.profile?.stxAddress,\n      isSignedIn: !!user,\n    }),\n    [user]\n  );\n\n  return data;\n}\n\nexport {useUser};\n","import {useUser} from './useUser';\n\nexport function useCurrentAddress() {\n  const {addresses} = useUser();\n  return addresses?.testnet;\n}\n\nexport function useCurrentMainnetAddress() {\n  const {addresses} = useUser();\n  return addresses?.mainnet;\n}\n","import {Typography} from '@material-ui/core';\nimport {useCurrentAddress} from 'common/hooks/useCurrentAddress';\nimport React from 'react';\nimport {useGetJifBalanceQuery} from 'store/api';\n\nfunction AccountBalance() {\n  const address = useCurrentAddress();\n  const {data} = useGetJifBalanceQuery(address, {\n    pollingInterval: 1000 * 60,\n  });\n  return <Typography>{data || 0} JIF</Typography>;\n}\n\nexport default AccountBalance;\n","import {mainNetwork} from 'common/stacks';\nimport {setAccountNames} from 'store/auth';\n\nconst STALE_TIME = 30 * 60 * 1000;\n\nconst makeKey = (networkUrl, address) => `${networkUrl}__${address}`;\n\nfunction getLocalNames(networkUrl, address) {\n  const key = makeKey(networkUrl, address);\n  const value = localStorage.getItem(key);\n  if (!value) return null;\n  return JSON.parse(value);\n}\n\nfunction setLocalNames(networkUrl, address, data) {\n  const key = makeKey(networkUrl, address);\n  return localStorage.setItem(key, JSON.stringify(data));\n}\n\nasync function fetchNamesByAddress(param) {\n  const res = await fetch(`${param.networkUrl}/v1/addresses/stacks/${param.address}`);\n  const data = await res.json();\n  return data?.names || [];\n}\n\nexport const getAccountNamesByAddress = address => async dispatch => {\n  if (!address) return;\n\n  if (!mainNetwork) return;\n\n  const local = getLocalNames(mainNetwork.coreApiUrl, address);\n\n  if (local) {\n    const [names, timestamp] = local;\n    const now = Date.now();\n    const isStale = now - timestamp > STALE_TIME;\n    if (!isStale) {\n      dispatch(setAccountNames(names));\n      return;\n    }\n  }\n\n  try {\n    const names = await fetchNamesByAddress({\n      networkUrl: mainNetwork.coreApiUrl,\n      address,\n    });\n    if (names?.length) {\n      setLocalNames(mainNetwork.coreApiUrl, address, [names, Date.now()]);\n    }\n    dispatch(setAccountNames(names || []));\n  } catch (e) {\n    dispatch(setAccountNames([]));\n  }\n};\n","/**\n * truncateHex\n *\n * Truncates hex while keeping the 0x prefix.\n *\n * @param {string} hex - the hex to truncate\n * @param {number} offset - the number of chars to keep\n */\nexport function truncateHex(hex, offset = 5) {\n  return `${hex.substring(0, offset + 2)}…${hex.substring(hex.length - offset)}`;\n}\n\n/**\n * truncateMiddle\n *\n * If contract_id, it will truncate the principal, while keeping the contract name untouched.\n * If prefixed with '0x', will truncate everything after prefix.\n *\n * @param {string} input - the string to truncate\n * @param {number} offset - the number of chars to keep on either end\n */\nexport function truncateMiddle(input, offset = 5) {\n  if (!input) return '';\n  // hex\n  if (input.startsWith('0x')) {\n    return truncateHex(input, offset);\n  }\n  // for contracts\n  if (input.includes('.')) {\n    const parts = input.split('.');\n    const start = parts[0]?.substr(0, offset);\n    const end = parts[0]?.substr(parts[0].length - offset, parts[0].length);\n    return `${start}…${end}.${parts[1]}`;\n  }\n  // everything else\n  const start = input?.substr(0, offset);\n  const end = input?.substr(input.length - offset, input.length);\n  return `${start}…${end}`;\n}\n","import {useDispatch, useSelector} from 'react-redux';\nimport React from 'react';\nimport {accountNamesSelector} from 'store/auth';\nimport {getAccountNamesByAddress} from 'store/thunks/getAccountNamesByAddress';\nimport {truncateMiddle} from 'common/utils/stacks-utils';\nimport {useCurrentAddress, useCurrentMainnetAddress} from './useCurrentAddress';\nimport {useUser} from './useUser';\n\nfunction useAccountName() {\n  const {user} = useUser();\n  const dispatch = useDispatch();\n  const names = useSelector(accountNamesSelector);\n  const address = useCurrentMainnetAddress();\n  const testnetAddress = useCurrentAddress();\n  const name = names?.[0];\n\n  React.useEffect(() => {\n    if (!name) {\n      dispatch(getAccountNamesByAddress(address));\n    }\n  }, [address, dispatch, name]);\n\n  return name || user?.username || truncateMiddle(testnetAddress);\n}\n\nexport {useAccountName};\n","import {Typography} from '@material-ui/core';\nimport {useAccountName} from 'common/hooks/useAccountName';\nimport React from 'react';\n\nfunction AccountName(props) {\n  const name = useAccountName();\n  return <Typography {...props}>{name}</Typography>;\n}\n\nexport default AccountName;\n","import {Button, CircularProgress} from '@material-ui/core';\nimport {useConnect} from '@stacks/connect-react';\nimport React from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\nimport {authLoadingSelector, setAuthLoading} from 'store/auth';\n\nfunction ConnectWalletButton({endIcon, onClick, children, disabled, ...props}) {\n  const {doOpenAuth} = useConnect();\n  const dispatch = useDispatch();\n  const isLoading = useSelector(authLoadingSelector);\n\n  return (\n    <Button\n      {...props}\n      onClick={() => {\n        dispatch(setAuthLoading(true));\n        doOpenAuth();\n        onClick?.();\n      }}\n      endIcon={isLoading ? <CircularProgress size=\"1rem\" /> : endIcon}\n      disabled={!!(isLoading || disabled)}\n    >\n      {children ?? `Connect wallet`}\n    </Button>\n  );\n}\n\nexport default ConnectWalletButton;\n","import {\n  AppBar,\n  Container,\n  Toolbar,\n  Typography,\n  Link as MuiLink,\n  makeStyles,\n  Button,\n  Box,\n  IconButton,\n  Avatar,\n  Menu,\n  MenuItem,\n  ListItemIcon,\n  ListItemText,\n  Divider,\n} from '@material-ui/core';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport AddIcon from '@material-ui/icons/Add';\nimport {useUser} from 'common/hooks/useUser';\nimport AccountBalance from 'components/shared/AccountBalance';\nimport AccountName from 'components/shared/AccountName';\nimport ConnectWalletButton from 'components/shared/ConnectWalletButton';\nimport React from 'react';\nimport {Link as RouterLink, useHistory} from 'react-router-dom';\nimport {useSignOut} from 'common/hooks/useSignOut';\n\nconst useStyles = makeStyles(theme => ({\n  grow: {\n    flexGrow: 1,\n  },\n  navItems: {\n    display: 'flex',\n    alignItems: 'center',\n    '& > * + *': {\n      marginLeft: theme.spacing(2),\n    },\n  },\n}));\n\nfunction MakeAPostButton(props) {\n  const history = useHistory();\n  const gotoPost = () => {\n    history.push('/post');\n  };\n  return (\n    <Button {...props} onClick={gotoPost} endIcon={<AddIcon />}>\n      Post Jif\n    </Button>\n  );\n}\n\nfunction NameAndBalance() {\n  return (\n    <Box display=\"flex\" flexDirection=\"column\">\n      <AccountName />\n      <AccountBalance />\n    </Box>\n  );\n}\n\nfunction AccountMenu() {\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const signOut = useSignOut();\n  const isMenuOpen = Boolean(anchorEl);\n\n  const handleMenu = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div>\n      <IconButton\n        size=\"small\"\n        aria-label=\"account of current user\"\n        aria-controls=\"user-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleMenu}\n        color=\"inherit\"\n      >\n        <Avatar\n        //  alt={authUser.firstName} src={authUser.profile_pic_url}\n        />\n      </IconButton>\n      <Menu\n        id=\"user-menu\"\n        anchorEl={anchorEl}\n        getContentAnchorEl={null}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'center',\n        }}\n        keepMounted\n        open={isMenuOpen}\n        onClose={handleMenuClose}\n      >\n        <MenuItem disabled divider style={{opacity: 1}}>\n          <div style={{display: 'flex', alignItems: 'center'}}>\n            <Box mr={2}>\n              <Avatar />\n            </Box>\n            <NameAndBalance />\n          </div>\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            signOut();\n            handleMenuClose();\n          }}\n        >\n          <ListItemIcon>\n            <ExitToAppIcon />\n          </ListItemIcon>\n          <ListItemText primary=\"Logout\" />\n        </MenuItem>\n      </Menu>\n    </div>\n  );\n}\n\nfunction SignedInNavItems() {\n  const classes = useStyles();\n  return (\n    <div className={classes.navItems} display=\"flex\" alignItems=\"center\">\n      <MakeAPostButton />\n      <Divider orientation=\"vertical\" flexItem />\n      <NameAndBalance />\n      <Divider orientation=\"vertical\" flexItem />\n      <AccountMenu />\n    </div>\n  );\n}\n\nfunction Navbar() {\n  const {isSignedIn} = useUser();\n  const classes = useStyles();\n\n  return (\n    <AppBar position=\"fixed\" variant=\"outlined\" color=\"default\">\n      <Container>\n        <Toolbar>\n          <Typography className={classes.grow} variant=\"h5\">\n            <MuiLink color=\"inherit\" component={RouterLink} to=\"/\">\n              jif-chat-stacks\n            </MuiLink>\n          </Typography>\n          {!isSignedIn && <ConnectWalletButton />}\n          {isSignedIn && <SignedInNavItems />}\n        </Toolbar>\n      </Container>\n    </AppBar>\n  );\n}\n\nexport default Navbar;\n","import React from 'react';\nimport {useDispatch} from 'react-redux';\nimport {setAuthUser} from 'store/auth';\nimport {userSession} from 'common/stacks';\n\nfunction useSignOut() {\n  const dispatch = useDispatch();\n\n  const signOut = React.useCallback(() => {\n    userSession?.signUserOut?.();\n    dispatch(setAuthUser(null));\n  }, [dispatch]);\n\n  return signOut;\n}\n\nexport {useSignOut};\n","import {styled} from '@material-ui/core';\nimport React from 'react';\nimport Navbar from './Navbar';\n\nconst MB = styled('div')({\n  marginBottom: '5rem',\n});\n\nfunction Layout({children}) {\n  return (\n    <>\n      <MB>\n        <Navbar />\n      </MB>\n      {children}\n    </>\n  );\n}\n\nexport default Layout;\n","const {styled} = require('@material-ui/core');\n\nconst Video = styled('video')({\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  right: 0,\n  bottom: 0,\n  objectFit: 'cover',\n  width: '100%',\n  height: '100%',\n});\n\nexport default Video;\n","import React from 'react';\nimport Video from './Video';\n\nconst GifVideoPlayer = ({gif}) => {\n  const videoRef = React.useRef(null);\n  React.useEffect(() => {\n    const video = videoRef.current;\n    const videoURL = window.URL.createObjectURL(gif);\n    video.src = videoURL;\n    return () => {\n      window.URL.revokeObjectURL(videoURL);\n    };\n  }, [gif, videoRef]);\n\n  return <Video className=\"video\" ref={videoRef} autoPlay loop muted playsInline />;\n};\n\nexport default GifVideoPlayer;\n","import {styled} from '@material-ui/core';\n\nconst VideoContainer = styled('div')({\n  position: 'relative',\n  width: '100%',\n  height: '250px',\n  maxWidth: '450px',\n});\n\nexport default VideoContainer;\n","import {Typography, Paper, Box, makeStyles} from '@material-ui/core';\nimport GifVideoPlayer from 'components/Post/GifVideoPlayer';\nimport VideoContainer from 'components/Post/VideoContainer';\nimport {truncateMiddle} from 'common/utils/stacks-utils';\nimport React from 'react';\nimport {useGetGifFromGaiaQuery} from 'store/api';\nimport {base64StringToBlob} from 'blob-util';\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    padding: theme.spacing(3),\n    paddingTop: 5,\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nfunction FeedItem({content, sender, attachment}) {\n  const classes = useStyles();\n\n  const {data} = useGetGifFromGaiaQuery(attachment);\n\n  const gif = React.useMemo(() => {\n    if (!data) return null;\n    const $gif = base64StringToBlob(data.base64Video, {\n      type: data.type,\n    });\n    return $gif;\n  }, [data]);\n\n  return (\n    <Paper className={classes.paper}>\n      <Box my={2}>\n        <Typography>{truncateMiddle(sender)}</Typography>\n      </Box>\n      {Boolean(gif) && (\n        <VideoContainer>\n          <GifVideoPlayer gif={gif} />\n        </VideoContainer>\n      )}\n      <Typography>{content}</Typography>\n    </Paper>\n  );\n}\n\nexport default FeedItem;\n","import React from 'react';\nimport {Container} from '@material-ui/core';\nimport {useFeed} from 'common/hooks/useFeed';\nimport FeedItem from './FeedItem';\n\nfunction Feed() {\n  const data = useFeed();\n  return (\n    <Container maxWidth=\"xs\">\n      {data?.map(item => (\n        <FeedItem key={item.id} {...item} />\n      ))}\n    </Container>\n  );\n}\n\nexport default Feed;\n","import React from 'react';\nimport {useGetJifTransactionsQuery, useGetPendingJifTransactionsQuery} from 'store/api';\n\nfunction useFeed() {\n  const {data: completed} = useGetJifTransactionsQuery(undefined, {\n    pollingInterval: 500,\n  });\n  const {data: pending} = useGetPendingJifTransactionsQuery(undefined, {\n    pollingInterval: 1000,\n  });\n  const combined = React.useMemo(\n    () => [...(pending || []), ...(completed || [])],\n    [completed, pending]\n  );\n\n  React.useEffect(() => {\n    console.log({combined});\n  }, [combined]);\n\n  return combined;\n}\n\nexport {useFeed};\n","import React from 'react';\nimport Layout from 'components/shared/Layout';\nimport Feed from 'components/Home/Feed';\nimport {Container} from '@material-ui/core';\n\nfunction Home() {\n  return (\n    <Layout>\n      <Container>\n        <Feed />\n      </Container>\n    </Layout>\n  );\n}\n\nexport default Home;\n","import React from 'react';\nimport Video from './Video';\n\nfunction stopStreamedVideo(videoElem) {\n  if (videoElem && videoElem.srcObject) {\n    const stream = videoElem.srcObject;\n    const tracks = stream.getTracks();\n\n    tracks.forEach(track => {\n      track.stop();\n    });\n\n    // eslint-disable-next-line no-param-reassign\n    videoElem.srcObject = null;\n  }\n}\n\nconst LiveCamera = props => {\n  const {constraint, onMediaStreamError, onMediaStream} = props;\n  const liveVideoRef = React.useRef(null);\n\n  React.useEffect(() => {\n    const video = liveVideoRef.current;\n    if ('mediaDevices' in navigator && 'getUserMedia' in navigator.mediaDevices) {\n      window.navigator.mediaDevices\n        .getUserMedia(constraint)\n        .then(stream => {\n          video.srcObject = stream;\n          onMediaStream(stream);\n        })\n        .catch(onMediaStreamError);\n\n      video.onloadedmetadata = function metadata() {\n        video.play();\n      };\n    } else {\n      onMediaStreamError(new Error('camera not supported'));\n    }\n    return () => {\n      stopStreamedVideo(video);\n    };\n  }, [liveVideoRef, constraint, onMediaStreamError, onMediaStream]);\n\n  return <Video className=\"video\" ref={liveVideoRef} autoPlay loop muted playsInline />;\n};\n\nexport default LiveCamera;\n","import React from 'react';\nimport {FiCameraOff} from 'react-icons/fi';\nimport {MdCancel} from 'react-icons/md';\nimport {RiCameraSwitchLine, RiRecordCircleLine} from 'react-icons/ri';\nimport {styled, Typography, IconButton, makeStyles} from '@material-ui/core';\nimport LiveCamera from './LiveCamera';\nimport GifVideoPlayer from './GifVideoPlayer';\nimport VideoContainer from './VideoContainer';\n\nconst useStyles = makeStyles(theme => ({\n  button: {\n    color: theme.palette.common.black,\n  },\n  recordingButton: {\n    color: theme.palette.error.main,\n    // '&:disabled': {\n\n    // }\n  },\n  controlsContainer: {\n    paddingBlock: theme.spacing(2),\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n}));\n\nconst ErrorContainer = styled('div')(({theme}) => ({\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  color: theme.palette.error.main,\n  '& > * + *': {\n    marginTop: theme.spacing(1),\n  },\n}));\n\nconst CameraContainer = styled('div')(({theme}) => ({\n  position: 'relative',\n  backgroundColor: theme.palette.grey[100],\n  borderRadius: '5px',\n}));\n\nconst AbsoluteCenter = styled('div')({\n  position: 'absolute',\n  top: '50%',\n  left: '50%',\n  transform: 'translate(-50%, -50%)',\n});\n\nfunction GifRecorder({gifVideo, setGifVideo, disabled = false, required}) {\n  const classes = useStyles();\n  const [isOff, setOff] = React.useState(false);\n  const [isSupported, setSupported] = React.useState(true);\n  const [isFront, setFront] = React.useState(true);\n  const [recording, setRecording] = React.useState(false);\n  const [recorder, setRecorder] = React.useState(null);\n\n  const isError = !disabled && required && !gifVideo;\n\n  const constraint = React.useMemo(\n    () => ({\n      audio: false,\n      video: {\n        facingMode: isFront ? 'user' : 'environment',\n\n        width: {min: 640, ideal: 1920, max: 1920},\n        height: {min: 400, ideal: 1080},\n      },\n    }),\n    [isFront]\n  );\n\n  const streamMediaHandler = React.useCallback(stream => {\n    const mediaRecorder = new MediaRecorder(stream);\n    setRecorder(mediaRecorder);\n    setOff(false);\n    setSupported(true);\n  }, []);\n\n  const streamMediaErrorHandler = React.useCallback(e => {\n    if (e.name === 'NotAllowedError') {\n      setOff(true);\n    } else {\n      setSupported(false);\n    }\n  }, []);\n\n  const recordHandler = React.useCallback(() => {\n    setRecording(true);\n    const chunks = [];\n    recorder.start();\n    setTimeout(() => {\n      recorder.stop();\n    }, 1800);\n\n    recorder.ondataavailable = function dataAvailable(ev) {\n      chunks.push(ev.data);\n    };\n    recorder.onstop = () => {\n      const blob = new Blob(chunks, {type: 'video/mp4;'});\n\n      setGifVideo(blob);\n\n      setRecording(false);\n      setRecorder(null);\n    };\n  }, [recorder, setGifVideo]);\n\n  const toggleCamera = React.useCallback(() => {\n    setFront(!isFront);\n  }, [isFront]);\n\n  const clearGifVideo = React.useCallback(() => {\n    setGifVideo(null);\n  }, [setGifVideo]);\n\n  return (\n    <div>\n      <CameraContainer>\n        {!gifVideo && (\n          <VideoContainer>\n            <LiveCamera\n              constraint={constraint}\n              onMediaStream={streamMediaHandler}\n              onMediaStreamError={streamMediaErrorHandler}\n            />\n          </VideoContainer>\n        )}\n        {gifVideo && (\n          <VideoContainer>\n            <GifVideoPlayer gif={gifVideo} />\n          </VideoContainer>\n        )}\n        {isOff && (\n          <AbsoluteCenter>\n            <ErrorContainer>\n              <FiCameraOff fontSize=\"1.5rem\" />\n              <Typography>camera is off</Typography>\n            </ErrorContainer>\n          </AbsoluteCenter>\n        )}\n        {!isSupported && (\n          <AbsoluteCenter>\n            <Typography color=\"error\">\n              {isFront ? 'front' : 'back'} camera is not supported\n            </Typography>\n          </AbsoluteCenter>\n        )}\n      </CameraContainer>\n\n      <div className={classes.controlsContainer}>\n        <IconButton\n          className={classes.button}\n          size=\"small\"\n          disabled={!gifVideo || recording || !isSupported || isOff || disabled}\n          onClick={clearGifVideo}\n        >\n          <MdCancel />\n        </IconButton>\n        <IconButton\n          className={classes.recordingButton}\n          size=\"small\"\n          disabled={!recorder || recording || gifVideo || !isSupported || isOff || disabled}\n          onClick={recordHandler}\n        >\n          <RiRecordCircleLine fontSize=\"3rem\" />\n        </IconButton>\n\n        <IconButton\n          className={classes.button}\n          size=\"small\"\n          onClick={toggleCamera}\n          disabled={disabled}\n        >\n          <RiCameraSwitchLine />\n        </IconButton>\n      </div>\n      {isError && (\n        <div>\n          <span>*</span> <span>gif required</span>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default GifRecorder;\n","import React from 'react';\nimport {TextField as MuiTextField} from '@material-ui/core';\n\nfunction TextField({value, onChange}) {\n  return (\n    <MuiTextField\n      multiline\n      inputProps={{maxLength: 140}}\n      rowsMax={5}\n      value={value}\n      onChange={onChange}\n      variant=\"outlined\"\n      fullWidth\n      placeholder=\"Say hi\"\n    />\n  );\n}\n\nexport default TextField;\n","import React from 'react';\nimport Layout from 'components/shared/Layout';\nimport GifRecorder from 'components/Post/GifRecorder';\nimport TextField from 'components/Post/TextField';\nimport {RiSendPlane2Fill} from 'react-icons/ri';\nimport {v4 as uuidv4} from 'uuid';\nimport {blobToBase64String} from 'blob-util';\nimport {Container, makeStyles, Paper, Button, CircularProgress} from '@material-ui/core';\nimport {useUser} from 'common/hooks/useUser';\nimport {storage, testNetwork} from 'common/stacks';\nimport {useCurrentAddress} from 'common/hooks/useCurrentAddress';\nimport {JIF_CHAT_CONTRACT} from 'common/constants';\nimport {useConnect} from '@stacks/connect-react';\nimport {\n  createAssetInfo,\n  FungibleConditionCode,\n  noneCV,\n  someCV,\n  stringUtf8CV,\n} from '@stacks/connect/node_modules/@stacks/transactions';\nimport {createFungiblePostCondition} from '@stacks/transactions';\nimport {BN} from 'bn.js';\nimport {useDispatch} from 'react-redux';\nimport api from 'store/api';\nimport {useHistory} from 'react-router-dom';\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    padding: theme.spacing(3),\n  },\n  button: {\n    display: 'flex',\n    marginTop: '1rem',\n    marginLeft: 'auto',\n  },\n}));\n\nfunction Post() {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\n  const [gif, setGif] = React.useState(null);\n  const [content, setContent] = React.useState('');\n  const {isSignedIn} = useUser();\n  const address = useCurrentAddress();\n  const [contractAddress, contractName] = JIF_CHAT_CONTRACT.split('.');\n  const {doContractCall} = useConnect();\n\n  const handleSubmit = async () => {\n    try {\n      setIsSubmitting(true);\n      const id = uuidv4();\n      let fileUrl = '';\n      if (gif) {\n        const base64Video = await blobToBase64String(gif);\n        const {type} = gif;\n        fileUrl = await storage.putFile(\n          id,\n          JSON.stringify({\n            base64Video,\n            type,\n          }),\n          {\n            encrypt: false,\n          }\n        );\n      }\n\n      doContractCall({\n        contractAddress,\n        contractName,\n        functionName: 'send-message',\n        functionArgs: [\n          stringUtf8CV(content),\n          fileUrl !== '' ? someCV(stringUtf8CV(fileUrl)) : noneCV(),\n        ],\n        onFinish() {\n          dispatch(\n            api.endpoints.getJifBalance.initiate(address, {\n              forceRefetch: true,\n            })\n          );\n          dispatch(\n            api.endpoints.getJifTransactions.initiate(undefined, {\n              forceRefetch: true,\n            })\n          );\n          dispatch(\n            api.endpoints.getPendingJifTransactions.initiate(undefined, {\n              forceRefetch: true,\n            })\n          );\n          setIsSubmitting(false);\n          history.push('/');\n        },\n        postConditions: [\n          createFungiblePostCondition(\n            address,\n            FungibleConditionCode.Equal,\n            new BN(1),\n            createAssetInfo(contractAddress, 'jif-token', 'jif-token')\n          ),\n        ],\n        onCancel() {\n          setIsSubmitting(false);\n        },\n        network: testNetwork,\n        stxAddress: address,\n      });\n    } catch (error) {\n      console.error(error);\n      setIsSubmitting(false);\n    }\n  };\n\n  const onChange = e => {\n    setContent(e.target.value);\n  };\n\n  // console.log({gif});\n  return (\n    <Layout>\n      <Container maxWidth=\"xs\">\n        <Paper className={classes.paper}>\n          <GifRecorder required={false} gifVideo={gif} setGifVideo={setGif} />\n          <TextField value={content} onChange={onChange} />\n          <Button\n            className={classes.button}\n            color=\"primary\"\n            variant=\"contained\"\n            disabled={!content?.trim() || isSubmitting || !isSignedIn}\n            endIcon={isSubmitting ? <CircularProgress size=\"1rem\" /> : <RiSendPlane2Fill />}\n            onClick={handleSubmit}\n          >\n            Post\n          </Button>\n        </Paper>\n      </Container>\n    </Layout>\n  );\n}\n\nexport default Post;\n","import React from 'react';\nimport {Connect} from '@stacks/connect-react';\nimport {useConnectAuthOptions} from 'common/hooks/useConnectAuthOptions';\nimport {Switch, Route} from 'react-router-dom';\nimport Home from 'pages/Home';\nimport Post from 'pages/Post';\n\nfunction App() {\n  const authOptions = useConnectAuthOptions();\n\n  return (\n    <Connect authOptions={authOptions}>\n      <Switch>\n        <Route exact path=\"/\">\n          <Home />\n        </Route>\n        <Route exact path=\"/post\">\n          <Post />\n        </Route>\n      </Switch>\n    </Connect>\n  );\n}\n\nexport default App;\n","import {userSession} from 'common/stacks';\nimport {useDispatch} from 'react-redux';\nimport {setAuthLoading, setAuthUser} from 'store/auth';\n\nfunction useConnectAuthOptions() {\n  const dispatch = useDispatch();\n  const onFinish = ({\n    //   authResponse, authResponsePayload,\n    userSession: $userSession,\n  }) => {\n    const userData = $userSession?.loadUserData?.();\n    dispatch(setAuthUser(userData));\n    dispatch(setAuthLoading(false));\n  };\n  const onCancel = () => {\n    dispatch(setAuthLoading(false));\n  };\n  const authOptions = {\n    manifestPath: '/static/manifest.json',\n    userSession,\n    onFinish,\n    onCancel,\n    appDetails: {\n      name: 'Jif Chat',\n      icon: '/logo192.png',\n    },\n  };\n  return authOptions;\n}\n\nexport {useConnectAuthOptions};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport {BrowserRouter as Router} from 'react-router-dom';\nimport ThemeProvider from 'components/theme/ThemeProvider';\nimport store from './store/index';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router basename={process.env.PUBLIC_URL}>\n        <ThemeProvider>\n          <App />\n        </ThemeProvider>\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","var map = {\n\t\"./connect-modal.entry.js\": [\n\t\t1054,\n\t\t4\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 950;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}